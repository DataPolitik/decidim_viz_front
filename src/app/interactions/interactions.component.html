<a id="top"></a>
<div id="legend">
  <div id="communities_summary">
    {{'interactions.legend_title' | translate}}
  </div>
  <ng-container *ngFor="let item of this.colorsNodesSortedList ; let indexOfelement=index;">
    <div *ngIf="isMinimumRatio(item.key)" class="population_legend_entry">
      <div class="target_color_legend" [style]="'background-color:' + item.key +';'"> </div>
      <span>{{getRatioOfCommunity(item.key) * 100 | number:'1.2'}}%</span>
    </div>
  </ng-container>
  <div class="population_legend_entry">
    <div class="target_text_legend"> Otros </div>
    <span>{{this.othersRatio | number:'1.2'}}%</span>
  </div>
</div>
<div id="interaction_tabView">
  <div id="long_explanation">
    {{'interactions.long_explanation' | translate}}
  </div>
  <div>
    <div class="graph" *ngIf="this.currentElement == 'comments'">
      <app-graph-component class="graphComponent" [graphToCall]="this.commentsGraphType" graphTitle="{{'interactions.comments_network' | translate}}"></app-graph-component>
    </div>
    <div class="graph" *ngIf="this.currentElement == 'endorsements'">
      <app-graph-component class="graphComponent" [graphToCall]="this.endorsementsGraphType" graphTitle="{{'interactions.endorsements_network' | translate}}"></app-graph-component>
      <div *ngIf="this.modularityValue" id="modularity_explanation">
        {{'interactions.modularity_explanation' | translate }} {{this.modularityValue | number:'1.2'}} <a href="https://networkx.org/documentation/stable/reference/algorithms/generated/networkx.algorithms.community.quality.modularity.html" parent="_blank" title="info">ðŸ›ˆ</a>
      </div>
    </div>
  </div>
  <div id="interaction_tabView__communities">
    <ng-container *ngFor="let item of this.colorsNodesSortedList; let indexOfelement=index;">
      <p-card class="community_card" *ngIf="isMinimumRatio(item.key)" >
        <ng-template pTemplate="header" >
          <h3 [style]="'color:' + item.key +';'">
            Comunidad:  {{indexOfelement + 1}}
          </h3>
        </ng-template>
            <ul>
              <li>Color: <div class="target_color" [style]="'background-color:' + item.key +';'"> </div></li>
              <li>Total number of people: {{getLenghtOfCommunity(item.key)}}</li>
              <li>% over the total network: {{getRatioOfCommunity(item.key) * 100 | number:'1.2'}}%</li>
            </ul>
        <ng-template pTemplate="footer">
            <div>
              <h4>Most endorsed proposals</h4>
              <ul class="proposal_list" *ngIf="this.communitiesProposals">
                <li *ngFor="let prop of getProposals(item.key) | keyvalue">{{prop.key}}</li>
              </ul>
            </div>
        </ng-template>
      </p-card>
    </ng-container>
  </div>
</div>
